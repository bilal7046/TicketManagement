@using TicketManagement.Entities
@model Booking
@{
    ViewData["Title"] = "BookTicket";
}


<div class="container">
    <div class="header">
        <h1>Book Your Ticket</h1>
    </div>
    <form method="post">
        <div asp-validation-summary="ModelOnly"></div>
        <label for="firstName">Your name <span>*</span></label>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="firstName" placeholder="First Name" asp-for="FirstName">
            <span asp-validation-for="FirstName" class="text-danger"></span>
            <input type="text" id="lastName" placeholder="Last Name" asp-for="LastName">
            <span asp-validation-for="FirstName" class="text-danger"></span>
        </div>

        <label for="email">E-mail <span>*</span></label>
        <input type="email" id="email" placeholder="e.g., myname@example.com" asp-for="Email">
        <span asp-validation-for="Email" class="text-danger"></span>

        <label for="dob">Date of birth <span>*</span></label>
        <input type="date" id="dob" asp-for="DOB">
        <span asp-validation-for="DOB" class="text-danger"></span>

        <label>Select ticket type <span>*</span></label>
        <div class="radio-group">
            @{
                var ticketTypes = ViewData["TicketTypes"] as IEnumerable<TicketType>;
                if (ticketTypes != null && ticketTypes.Count() > 0)
                {
                    foreach (var type in ticketTypes)
                    {
                        <div id="ticket-element-@type.Id" class="ticket-element">
                            <input type="radio" id="ticket-@type.Id" asp-for="TicketTypeId" value="@type.Id" onclick="checkIfQuantityAvailable(@type.Id)">
                            <p for="@type.Id">
                                @type.Name (£ @type.Price)
                                <span id="soldout-status-@type.Id" class="sold-out" style="color: red; display: none;">Sold out</span>
                                <span id="hurry-status-@type.Id" class="sold-out" style="color: orange; display: none;">Hurry selling fast</span>
                            </p>
                        </div>
                    }
                }
            }

           
        </div>

        <label for="quantity">Quantity<span>*</span></label>
        <input type="number" id="quantity" asp-for="Quantity" value="1">
        <span asp-validation-for="Quantity" class="text-danger"></span>

        <div class="promo-code">
            <label for="promo" class="form-label">Promo code:</label>
            <input type="text" id="promo" asp-for="@Model.PromoCodeStr">
            <button type="button" onclick="applyPromoCode()">Apply</button>
        </div>

        <div id="discount-display" style="color: green; margin-top: 10px;display:none">Discount: $0.00</div>
        <div style="margin-top: 10px;">
            <strong>Total Price: </strong>
            <span id="total-price">$0</span> <!-- Replace 100.00 with your dynamic total price -->
        </div>

        <button type="submit" id="btnSubmit"  class="btn-book">Book</button>
    </form>
</div>

<partial name="_validationscriptspartial"></partial>
@section Scripts
{
  
    <script src="~/js/ticket.js"></script>

}